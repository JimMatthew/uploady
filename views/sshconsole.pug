
doctype html
html
  head
    title SSH Console
    link(rel="stylesheet" href="https://unpkg.com/xterm/css/xterm.css")
    link(rel="stylesheet" href="/style.css") 
    script(src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.1/socket.io.js")
    script(src="https://unpkg.com/xterm/lib/xterm.js")
    script.
      document.addEventListener('DOMContentLoaded', () => {
        const socket = io()
        const term = new Terminal({
            rows: 40,
            cols: 100,
            cursorBlink: true,
            theme: {
            background: '#1e1e1e'
            }
      })
        term.open(document.getElementById('terminal'))
        
        const form = document.getElementById('sshForm')

        form.addEventListener('submit', (event) => {
          event.preventDefault()
          const host = document.getElementById('host').value
          const port = document.getElementById('port').value
          const username = document.getElementById('username').value
          const password = document.getElementById('password').value

          socket.emit('startSession', { host, port, username, password })
        })

        term.onData(data => {
          socket.emit('input', data)
        })

        socket.on('output', data => {
          term.write(data)
        })
      })
  body
    h1 SSH Console
    form#sshForm
      div
        label(for="host") Host:
        input#host(type="text" required)
      div
        label(for="port") Port:
        input#port(type="number" value="22" required)
      div
        label(for="username") Username:
        input#username(type="text" required)
      div
        label(for="password") Password:
        input#password(type="password" required)
      button(type="submit") Connect
    p 
    a(href="/sftp") Back to SFTP Browser    
    div#terminal(style="width: 100%; height: 500px;")

     